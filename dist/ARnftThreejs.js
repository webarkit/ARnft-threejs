!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ARnftThreejs={})}(this,(function(e){"use strict";class t{constructor(){}static interpolate(e){for(let t=0;t<16;t++)this.trackedMatrix.delta[t]=e[t]-this.trackedMatrix.interpolated[t],this.trackedMatrix.interpolated[t]=this.trackedMatrix.interpolated[t]+this.trackedMatrix.delta[t]/this.interpolationFactor;return this.trackedMatrix.interpolated}static isMobile(){return/Android|mobile|iPad|iPhone/i.test(navigator.userAgent)}static setMatrix(e,t){const r=[];for(const e in t)r[e]=t[e];"function"==typeof e.elements.set?e.elements.set(r):e.elements=[].slice.call(r)}}t.trackedMatrix={delta:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],interpolated:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},t.interpolationFactor=24;class r{constructor(e,t,r,i){this.root=r,this.renderer=new THREE.WebGLRenderer({canvas:t,context:e.renderer.context,alpha:e.renderer.alpha,premultipliedAlpha:e.renderer.premultipliedAlpha,antialias:e.renderer.antialias,stencil:e.renderer.stencil,precision:e.renderer.precision,depth:e.renderer.depth,logarithmicDepthBuffer:e.renderer.logarithmicDepthBuffer}),this.renderer.setPixelRatio(window.devicePixelRatio),this.scene=new THREE.Scene,this.extractor(i)?this.camera=new THREE.PerspectiveCamera(e.camera.fov,e.camera.ratio,e.camera.near,e.camera.far):this.camera=new THREE.Camera}extractor(e){return e}initRenderer(){this.camera.matrixAutoUpdate=!1,document.addEventListener("getProjectionMatrix",(e=>{r.setMatrix(this.camera.projectionMatrix,e.detail.proj)})),this.scene.add(this.camera);const e=new THREE.AmbientLight(16777215);this.scene.add(e),document.addEventListener("getMatrixGL_RH",(e=>{this.root.visible=!0;const r=t.interpolate(e.detail.matrixGL_RH);t.setMatrix(this.root.matrix,r)})),document.addEventListener("nftTrackingLost",(e=>{this.root.visible=!1})),this.root.visible=!1,this.scene.add(this.root),document.addEventListener("getWindowSize",(e=>{this.renderer.setSize(e.detail.sw,e.detail.sh)}));const i=new CustomEvent("onInitThreejsRendering",{detail:{renderer:this.renderer,scene:this.scene,camera:this.camera}});document.dispatchEvent(i)}draw(){this.renderer.render(this.scene,this.camera)}static setMatrix(e,t){const r=[];for(const e in t)r[e]=t[e];"function"==typeof e.elements.set?e.elements.set(r):e.elements=[].slice.call(r)}}e.SceneRendererTJS=r,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ARnftThreejs.js.map
